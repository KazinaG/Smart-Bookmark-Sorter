# ドキュメント配置ポリシー

## 基本構造

- ルート `README.md`: プロダクトのビジョン・主要機能を利用者視点でまとめる。
- ルート `AGENTS.md`: 承認フローやコミュニケーション規約など、エージェント運用の即時ルールを記載する。
- `docs/`: 抽象要求・仕様詳細・開発プロセス・ドメイン語彙・テンプレートなどコード外の一次情報を体系化するハブとする。

## サブディレクトリ指針

- `docs/dev-practices/`: 開発手順・運用の詳細（コミット、lint、作業フローなど）。
- `docs/policies/`: ポリシーや運用原則（ドキュメント方針・命名規則など）。
- `docs/templates/`: テンプレートやフォーマット集。
- `docs/glossary.md`: 頻出語彙を集約する。

必要に応じて他のテーマ別サブディレクトリを新設し、曖昧なフォルダ名（`common` など）は避ける。

## 運用原則

- 新しい一次情報はまず `docs/` に追加し、`README.md` や `AGENTS.md` は要約・導線に留める。
- 仕様ドキュメントには最終合意済みの内容のみを記載し、検討ログやドラフトメモは保存しない。検討途中のメモは別チャネルで管理し、合意内容のみを反映する。
- 恒久ドキュメント原則: `docs/` 配下は恒久の一次情報。時点依存の但し書き（「作業版」「暫定」「今回の反省」等）は書かない。日付は原則記載しない（必要な期日が発生した場合は、PR/Issue等の運用チャネル側で管理し、本文はタイムレスを維持）。
- 重複記載は禁止。内容を移動した場合は元の場所を最小限の案内だけ残す。
- Boy Scout Rule に従い、触れた箇所から段階的に再編する。旧ルール前提の記述を見つけたら速やかに整理する。
- 参照の優先順位は「ユーザーの明示指示 → 領域別一次情報（仕様は README、運用は AGENTS、抽象要求は docs/）→ テストコード → 実装コード」の順とし、回答や提案ではこの順序で整合性を確認する。

補足原則（構造化 × 恒久の最優先）

- 新規ファイルの作成有無は問わない。重要なのは、構造化された恒久ドキュメントとして上位READMEの導線に統合されていること。

## リンク導線ポリシー（厳格トップダウン）

トップダウンでの導線を厳密に統制します。逸脱が必要な場合はリンクで迂回せず、ディレクトリ構造の再設計で解決します。

- 許可される導線
  - 親README → 直下ディレクトリの README（children）。
  - 各README → 同一ディレクトリ配下の個別ドキュメント（siblings）。
  - 同一ディレクトリ内での相互参照（README ⇄ 個別ドキュメント）。

- 禁止される導線
  - 下位（子）から上位（親）へのリンク（children → parent）。
  - 階層をまたぐ横断リンク（例: `features/` から直接 `policies/` の個別文書へ）。
  - 親READMEから、子ディレクトリ内の個別ファイルへの直接リンク（READMEを経由せずに `*/something.md` へ直リンク）。

- 例外が必要な場合の対応
  - 共通化したい文書を、両者の親ディレクトリに移し、親READMEからのトップダウン導線に統合する。
  - 既存の横断リンクは廃止し、上位README → 下位README → 個別文書 の順へ付け替える。

## README 配置ルール

- `docs/` 以下の各ディレクトリには必ず `README.md` を配置し、配下ドキュメントの目的と導線をまとめる。
- ルールは `tools/guards/no-docs.sh` で自動検証される。新しいディレクトリを追加した場合は README を同時に作成する。
- 導線はトップダウン（上位 README → 下位 README → 個別ドキュメント）のみで構成する。個別ドキュメント同士の直接リンクは禁止し、階層 README を経由して移動する。上位から下位個別ドキュメントへの直接リンクは不可（下位 README を必ず経由）。

## 命名規則（概要）

- ディレクトリはケバブケースを使用し、曖昧語の新規作成は禁止。
- `src/app`: ルーティングのみを配置し、ロジックは `features` / `shared` へ分離する。
- `src/features/<feature>` 配下は `ui`、`hooks`、`model`、`types`、`utils`、`api` に分割する。
- `src/shared/` は横断的なコンポーネントやAPIラッパ等を配置する。
- Boy Scout Rule で段階的に命名を揃え、直接依存禁止の境界（`shared → features` 等）を守る。

詳細な命名や配置ルールは、必要に応じて `docs/policies/` 配下に追加してください。

## AGENTS.md スリム化ルール

- AGENTS.md には規約・ガードラインなど即時参照が必要な最小情報のみを記載し、詳細手順やサンプルは別ドキュメントへ分離する。
- 同一内容を複数箇所へ記載しない。重複を見つけた場合は最寄りの一次情報へ統合し、片側は削除する。
- コードブロックが連続するなど AGENTS.md が肥大化し始めた場合は、適切な `docs/` 配下へ分割して移設する。
